# Cr√©er le bon index.html
cat > frontend/index.html << 'EOF'
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
  <title>Spotify Party</title>
  
  <script>
    // Redirection IMM√âDIATE au chargement
    document.addEventListener('DOMContentLoaded', function() {
      console.log('üîç V√©rification URL...');
      console.log('URL compl√®te:', window.location.href);
      
      if (window.location.href.includes('/api/auth/callback?code=')) {
        console.log('‚úÖ D√©tection callback Spotify!');
        
        // Extraire le code
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
        
        if (code) {
          console.log('üìù Code extrait:', code);
          // Rediriger IMM√âDIATEMENT
          window.location.href = '/#/auth-callback?code=' + code;
        }
      } else {
        console.log('‚ùå Pas de callback Spotify d√©tect√©');
      }
    });
  </script>
  
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="favicon.png">
</head>
<body>
  <script src="main.dart.js" type="application/javascript"></script>
</body>
</html>
EOF